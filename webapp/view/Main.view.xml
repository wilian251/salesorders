<mvc:View 
	xmlns:mvc="sap.ui.core.mvc" 
	xmlns="sap.m"
	xmlns:ui="sap.ui.table"
	xmlns:core="sap.ui.core"
	controllerName="com.thera.ajinomoto.salesorders.controller.Main" 
	displayBlock="true">
	<NavContainer id="navContainer">
		<pages>
			<Page id="contentPage">
				<Panel backgroundDesign="Solid">
					<content>
						<VBox class="contentDTOVCCSELE">
							<VBox class="contentFilter">
								<Label text="{i18n>mainFilterSalesOrganization}:" required="true"/>
								<ComboBox
									id="SaleOrg"
									items="{
										path: '/HTvkoSet',
										length: '5000'
									}"
									width="100%"
									required="true"
									selectedKey="{filters>/selectionSalesOrg}"
									valueState="{filters>/State/selectionSalesOrg/ValueState}"
									valueStateText="{filters>/State/selectionSalesOrg/ValueStateText}"
									enabled="{filters>/State/selectionSalesOrg/Enabled}"
									visible="{filters>/State/selectionSalesOrg/Visible}"
									change="onValidatedFieldsRequired"
								>
									<core:Item key="{Vkorg}" text="{Vkorg} - {Vtext}"/>
								</ComboBox>		
							</VBox>

							<VBox class="contentFilter">
								<Label text="{i18n>mainFilterSector}:" required="true"/>
								<ComboBox
									id="Setor"
									items="{
										path: '/HTvtaSet',
										length: '5000'
									}"
									width="100%"
									required="true"
									selectedKey="{filters>/selectionSetorAt}"
									valueState="{filters>/State/selectionSetorAt/ValueState}"
									valueStateText="{filters>/State/selectionSetorAt/ValueStateText}"
									enabled="{filters>/State/selectionSetorAt/Enabled}"
									visible="{filters>/State/selectionSetorAt/Visible}"
									change="onValidatedFieldsRequired"
								>
									<core:Item key="{Spart}" text="{Vkorg} - {Spart} - {VtextSpa}"/>
								</ComboBox>		
							</VBox>

							<VBox class="contentFilter">
								<Label text="{i18n>mainFilterTypeOV}:"/>
								<MultiComboBox
									id="typeOV"
									items="{
										path: '/HTvakSet',
										length: '5000'
									}"
									width="100%"
									selectedKeys="{filters>/selectionTypeOV}"
									valueState="{filters>/State/selectionTypeOV/ValueState}"
									valueStateText="{filters>/State/selectionTypeOV/ValueStateText}"
									enabled="{filters>/State/selectionTypeOV/Enabled}"
									visible="{filters>/State/selectionTypeOV/Visible}"
								>
									<core:Item key="{Auart}" text="{Auart} - {Bezei}"/>
								</MultiComboBox>	
							</VBox>

							<VBox class="contentFilter"> 
								<Label text="{i18n>mainFilterDistributionChannel}:"/>
								<MultiComboBox
									id="CNLDIST"
									items="{
										path: '/HTvkovSet',
										length: '5000'
									}"
									width="100%"
									selectedKeys="{filters>/selectionCanalDist}"
									valueState="{filters>/State/selectionCanalDist/ValueState}"
									valueStateText="{filters>/State/selectionCanalDist/ValueStateText}"
									enabled="{filters>/State/selectionCanalDist/Enabled}"
									visible="{filters>/State/selectionCanalDist/Visible}"
								>
									<core:Item key="{Vtweg}" text="{Vkorg} - {Vtweg} - {Vtext}"/>
								</MultiComboBox>		
							</VBox>

							<VBox class="contentFilter">
								<Label text="{i18n>mainFilterClientCode}:"/>
								<MultiComboBox
									id="codClient"
									items="{
										path: '/ZshCodclientSet',
										length: '5000'
									}"
									width="100%"
									selectedKeys="{filters>/selectionClient}"
									valueState="{filters>/State/selectionClient/ValueState}"
									valueStateText="{filters>/State/selectionClient/ValueStateText}"
									enabled="{filters>/State/selectionClient/Enabled}"
									visible="{filters>/State/selectionClient/Visible}"
								>
									<core:Item key="{Kunnr}" text="{Kunnr} - {Name1}"/>
								</MultiComboBox>		
							</VBox>

							<VBox class="contentFilter">
								<Label text="{i18n>mainFilterOrderDateIn}:" required="true"/>
								<DatePicker
									id="DateIn"
									valueFormat="dd/MM/yyyy"
									displayFormat="short"
									placeholder="dd/mm/aaaa"
									width="100%"
									value="{filters>/selectionDateIn}"
									valueState="{filters>/State/selectionDateIn/ValueState}"
									valueStateText="{filters>/State/selectionDateIn/ValueStateText}"
									enabled="{filters>/State/selectionDateIn/Enabled}"
									visible="{filters>/State/selectionDateIn/Visible}"
									change="onValidatedFieldsRequired"
									required="true"
								/>	
							</VBox>
							
							<VBox class="contentFilter">
								<Label text="{i18n>mainFilterOrderDateUpUntil}:" required="true"/>
							
								<DatePicker
									id="DateUpUntil"
									valueFormat="dd/MM/yyyy"
									displayFormat="short"
									placeholder="dd/mm/aaaa"
									width="100%"
									value="{filters>/selectionDateUpUntil}"
									valueState="{filters>/State/selectionDateUpUntil/ValueState}"
									valueStateText="{filters>/State/selectionDateUpUntil/ValueStateText}"
									enabled="{filters>/State/selectionDateUpUntil/Enabled}"
									visible="{filters>/State/selectionDateUpUntil/Visible}"
									change="onValidatedFieldsRequired"
									required="true"
								/>
							</VBox>
						
							<!--<VBox class="contentFilter">
								<Label text="{i18n>mainFilterCompany}:"/>
								<MultiComboBox
									id="company"
									items="{
										path: '/ZshCompanySet',
										length: '5000'
									}"
									width="100%"
									selectedKeys="{filters>/selectionCompany}"
									valueState="{filters>/State/selectionCompany/ValueState}"
									valueStateText="{filters>/State/selectionCompany/ValueStateText}"
									enabled="{filters>/State/selectionCompany/Enabled}"
									visible="{filters>/State/selectionCompany/Visible}"
								>
									<core:Item key="{Bukrs}" text="{Bukrs} - {Butxt}"/>
								</MultiComboBox>		
							</VBox>

							<VBox visible="false">
								<Label text="{i18n>mainFilterShippingLocation}:"/>
								<Input
									id="localExpedicao"
									value="{filters>/selectionLocalExp}"
									valueState="{filters>/State/selectionLocalExp/ValueState}"
									valueStateText="{filters>/State/selectionLocalExp/ValueStateText}"
									enabled="{filters>/State/selectionLocalExp/Enabled}"
									visible="{filters>/State/selectionLocalExp/Visible}"
								/>	
							</VBox>-->

							<VBox width="100%" alignItems="End">
								<Label />
								<Button 
									text="{i18n>mainButtonStart}"
									enabled="{filters>/buttonStartEnabled}"
									press="onPressStartReport"
									type="Emphasized"
									width="10rem"
								/>
							</VBox>
						</VBox>
					</content>
				</Panel>

				<content>
					<Panel id="averageMediaSalesOrders" visible="false" backgroundDesign="Transparent">
						<headerToolbar>
							<Toolbar width="100%">
								<Title text="{orderTexts>/headerTextTitle}" titleStyle="H4" visible="{orderTexts>/State/headerTextTitle/Visible}"/>									

								<ToolbarSpacer/>

								<Button 
									text="{i18n>mainButtonMicroText}"
									press="onPressMicro"
								/>

								<Button
									icon="sap-icon://edit"
									press="onPressEditLead"
									type="Emphasized"
									text="{i18n>mainEditLeadTime}"
								>
									<dependents>
										<Text text="{filters>/selectionSetorAt}"/>
									</dependents>
								</Button>
							</Toolbar>
						</headerToolbar>

						<content>
							<VBox class="containerLeadTime">
								<!-- Ordem de venda -->
								<VBox id="saleOrder">
									<VBox class="mainLead">
										<Title class="mainLeadTitle" text="{i18n>mainTimeLead}:" titleStyle="H4"/>
										<Text class="mainLeadText" text="{orders>/averageSalesOrderSLA}"/>
									</VBox>

									<VBox class="mainTitulo">
										<Title text="{i18n>mainCycleSaleOrder}" titleStyle="H4"/>
									</VBox>
											
									<VBox class="icon">
										<core:Icon
											id="saleOrderIcon"
											alt="{i18n>mainCycleSaleOrder}"
											backgroundColor=""
											color="{orders>/State/averageSalesOrder/color}"
											size="64px"
											src="sap-icon://write-new-document"
										/>
									</VBox>

									<VBox class="time">
										<ObjectStatus
											active="false"
											icon="sap-icon://pending"
											iconDensityAware="true"
											state="{orders>/State/averageSalesOrder/ValueState}"
											text="{orders>/averageSalesOrder}"
											visible="{=${orders>/averageSalesOrder} === '' ? false : true}"
										/>

										<Text 
											text="{i18n>mainLeadTimeCycleNotStarted}" 
											visible="{=${orders>/averageSalesOrder} === '' ? true : false}"
										/>

										<VBox class="timeDiff">
											<ObjectStatus
												active="false"
												icon=""
												iconDensityAware="true"
												state="{orders>/State/averageSalesOrder/ValueState}"
												text="{orders>/averageSalesOrderDiff}"
											/>
										</VBox>
									</VBox>
								</VBox>

								<!-- Crédito -->
								<VBox id="credit">
									<VBox class="mainLead">
										<Title class="mainLeadTitle" text="{i18n>mainTimeLead}:" titleStyle="H4"/>
										<Text class="mainLeadText" text="{orders>/averageCreditSLA}"/>
									</VBox>

									<VBox class="mainTitulo">
										<Title text="{i18n>mainCycleCredit}" titleStyle="H4"/>
									</VBox>	

									<VBox class="icon">
										<core:Icon
											id="creditIcon"
											alt="{i18n>mainCycleCredit}"
											color="{orders>/State/averageCredit/color}"
											size="64px"
											src="sap-icon://credit-card"
										/>
									</VBox>
											
									<VBox class="time">
										<ObjectStatus
											active="false"
											icon="sap-icon://pending"
											iconDensityAware="true"
											state="{orders>/State/averageCredit/ValueState}"
											text="{orders>/averageCredit}"
											visible="{=${orders>/averageCredit} === '' ? false : true}"
										/>

										<Text 
											text="{i18n>mainLeadTimeCycleNotStarted}" 
											visible="{=${orders>/averageCredit} === '' ? true : false}"
										/> 
										
										<VBox class="timeDiff">
											<ObjectStatus
												active="false"
												icon=""
												iconDensityAware="true"
												state="{orders>/State/averageCredit/ValueState}"
												text="{orders>/averageCreditDiff}"
											/>
										</VBox>
									</VBox>
								</VBox>

								<!-- Remessa -->
								<VBox id="shipping">
									<VBox class="mainLead">
										<Title class="mainLeadTitle" text="{i18n>mainTimeLead}:" titleStyle="H4"/>
										<Text class="mainLeadText" text="{orders>/averageShippingSLA}"/>
									</VBox>


									<VBox class="mainTitulo">
										<Title text="{i18n>mainCycleShipping}" titleStyle="H4"/>
									</VBox>

									<VBox class="icon">
										<core:Icon
											id="shippingIcon"
											alt="{i18n>mainCycleShipping}"
											color="{orders>/State/averageShipping/color}"
											size="64px"
											src="sap-icon://course-program"
										/>
									</VBox>

									<VBox class="time">
										<ObjectStatus
											active="false"
											icon="sap-icon://pending"
											iconDensityAware="true"
											state="{orders>/State/averageShipping/ValueState}"
											text="{orders>/averageShipping}"
											visible="{=${orders>/averageShipping} === '' ? false : true}"
										/>

										<Text 
											text="{i18n>mainLeadTimeCycleNotStarted}" 
											visible="{=${orders>/averageShipping} === '' ? true : false}"
										/>

										<VBox class="timeDiff">
											<ObjectStatus
												active="false"
												icon=""
												iconDensityAware="true"
												state="{orders>/State/averageShipping/ValueState}"
												text="{orders>/averageShippingDiff}"
											/>
										</VBox>
									</VBox>
								</VBox>

								<!-- Transporte -->
								<VBox id="transport">
									<VBox class="mainLead">
										<Title class="mainLeadTitle" text="{i18n>mainTimeLead}:" titleStyle="H4"/>
										<Text class="mainLeadText" text="{orders>/averageTransportSLA}"/>
									</VBox>

									<VBox class="mainTitulo">	
										<Title text="{i18n>mainCycleTransport}" titleStyle="H4"/>
									</VBox>

									<VBox class="icon">
										<core:Icon
											id="transportIcon"
											alt="{i18n>mainCycleTransport}"
											color="{orders>/State/averageTransport/color}"
											size="64px"
											src="sap-icon://shipping-status"
										/>
									</VBox>

									<VBox class="time">
										<ObjectStatus
											active="false"
											icon="sap-icon://pending"
											iconDensityAware="true"
											state="{orders>/State/averageTransport/ValueState}"
											text="{orders>/averageTransport}"
											visible="{=${orders>/averageTransport} === '' ? false : true}"
										/>

										<Text 
											text="{i18n>mainLeadTimeCycleNotStarted}" 
											visible="{=${orders>/averageTransport} === '' ? true : false}"
										/> 

										<VBox class="timeDiff">
											<ObjectStatus
												active="false"
												icon=""
												iconDensityAware="true"
												state="{orders>/State/averageTransport/ValueState}"
												text="{orders>/averageTransportDiff}"
											/>
										</VBox>
									</VBox>
								</VBox>

								<!-- Faturamento -->
								<VBox id="invoicing">
									<VBox class="mainLead">
										<Title class="mainLeadTitle" text="{i18n>mainTimeLead}:" titleStyle="H4"/>
										<Text class="mainLeadText" text="{orders>/averageInvoicingSLA}"/>
									</VBox>

									<VBox class="mainTitulo">
										<Title text="{i18n>mainCycleInvoicing}" titleStyle="H4"/>
									</VBox>

									<VBox class="icon">
										<core:Icon
											id="invoicingIcon"
											alt="{i18n>mainCycleInvoicing}"
											color="{orders>/State/averageInvoicing/color}"
											size="64px"
											src="sap-icon://monitor-payments"
										/>
									</VBox>

									<VBox class="time">
										<ObjectStatus
											active="false"
											icon="sap-icon://pending"
											iconDensityAware="true"
											state="{orders>/State/averageInvoicing/ValueState}"
											text="{orders>/averageInvoicing}"
											visible="{=${orders>/averageInvoicing} === '' ? false : true}"
										/>

										<Text 
											text="{i18n>mainLeadTimeCycleNotStarted}" 
											visible="{=${orders>/averageInvoicing} === '' ? true : false}"
										/> 
										
										<VBox class="timeDiff">
											<ObjectStatus
												active="false"
												icon=""
												iconDensityAware="true"
												state="{orders>/State/averageInvoicing/ValueState}"
												text="{orders>/averageInvoicingDiff}"
											/>
										</VBox>
									</VBox>
								</VBox>

								<!-- Total do Tempo -->
								<VBox id="totalTime">
									<VBox class="mainLead">
										<Title class="mainLeadTitle" text="{i18n>mainTimeLead}:" titleStyle="H4"/>
										<Text class="mainLeadText" text="{orders>/averageTotalSLA}"/>
									</VBox>

									<VBox class="mainTitulo">
										<Title text="{i18n>mainCycleTotal}" titleStyle="H4"/>
									</VBox>

									<VBox class="icon">
										<core:Icon
											id="totalTimeIcon"
											alt="{i18n>mainCycleTotal}"
											color="{orders>/State/averageTotal/color}"
											size="64px"
											src="sap-icon://date-time"
										/>
									</VBox>
											
									<VBox class="time">
										<ObjectStatus
											active="false"
											icon="sap-icon://pending"
											iconDensityAware="true"
											state="{orders>/State/averageTotal/ValueState}"
											text="{orders>/averageTotal}"
											visible="{=${orders>/averageTotal} === '' ? false : true}"
										/>

										<Text 
											text="{i18n>mainLeadTimeCycleNotStarted}" 
											visible="{=${orders>/averageTotal} === '' ? true : false}"
										/>

										<VBox class="timeDiff">
											<ObjectStatus
												active="false"
												icon=""
												iconDensityAware="true"
												state="{orders>/State/averageTotal/ValueState}"
												text="{orders>/averageTotalDiff}"
											/>
										</VBox>
									</VBox>
								</VBox>
							</VBox>
						</content>
					</Panel>

					<Panel id="panelTableSalesOrders" visible="false">

						<content>
							<Table 
								id="tableSalesOrders" 
								updateFinished="onUpdateFinished"
								items="{
									path: 'orders>/items',
									length: '5000'
								}"
							>
								<headerToolbar>
									<Toolbar width="100%">
										<Title text="{orderTexts>/headerTitleTable}" level="H1" titleStyle="H3"/>
										<ToolbarSpacer />
										<SearchField
											id="searchField"
											search="onSearch"
											width="auto"
										/>
										<Button
											icon="sap-icon://excel-attachment"
											tooltip="{i18n>mainExportExcel}"
											press="onExportExcel"
										/>

										<Button 
											text="{i18n>mainButtonMacroText}"
											press="onPressMacro"
										/>
									</Toolbar>
								</headerToolbar>

								<columns>							
									<Column hAlign="Center" width="100%">
										<header>
											<Text text="{i18n>mainTableNumberDocument}"/>
										</header>
									</Column>
									<Column hAlign="Center" width="100%">
										<header> 
											<Text  text="{i18n>mainTableCompanyName}"/>
										</header>
									</Column>
									<Column hAlign="Center" width="100%">
										<header>
											<Text  text="{i18n>mainTableCustomerReference}"/>
										</header>
									</Column>
									<Column hAlign="Center" width="100%">
										<header>
											<Text text="{i18n>mainTableCustomerReferenceDate}"/>
										</header>
									</Column>
									<Column hAlign="Center" width="100%">
										<header>
											<Text text="{i18n>mainTableSalesOrganization}"/>
										</header>
									</Column>
									<Column hAlign="Center" width="100%">
										<header>
											<Text text="Emissor da ordem"/>
										</header>
									</Column>
									<Column hAlign="Center" width="100%">
										<header>
											<Text text="Tipo de documento de vendas"/>
										</header>
									</Column>
									<Column hAlign="Center" width="100%">
										<header>
											<Text text="Nome do responsável"/>
										</header>
									</Column>
									<Column hAlign="Center" width="100%">
										<header>
											<Text text="Data de Criação"/>
										</header>
									</Column>
									<Column hAlign="Center" width="100%">
										<header>
											<Text text="Hora de Criação"/>
										</header>
									</Column>


									<!--Ordem de Venda-->
									<Column hAlign="Center" width="100%">
										<header>
											<Text text="{i18n>mainTableSaleOrderStart}"/>
										</header>
									</Column>
									<Column hAlign="Center" width="100%">
										<header>
											<Text text="{i18n>mainTableSaleOrderFinal}"/>
										</header>
									</Column>
									<!--Crédito-->
									<Column hAlign="Center" width="100%">
										<header>
											<Text text="{i18n>mainTableCreditStart}"/>
										</header>
									</Column>
									<Column hAlign="Center" width="100%">
										<header>
											<Text text="{i18n>mainTableCreditFinal}"/>
										</header>
									</Column>
									<!--Remessa-->
									<Column hAlign="Center" width="100%">
										<header>
											<Text text="{i18n>mainTableShippingStart}"/>
										</header>
									</Column>
									<Column hAlign="Center" width="100%">
										<header>
											<Text text="{i18n>mainTableShippingFinal}"/>
										</header>
									</Column>
									<!--Transporte-->
									<Column hAlign="Center" width="100%">
										<header>
											<Text text="{i18n>mainTableTransportStart}"/>
										</header>
									</Column>
									<Column hAlign="Center" width="100%">
										<header>
											<Text text="{i18n>mainTableTransportFinal}"/>
										</header>
									</Column>
									<!--Faturamento-->
									<Column hAlign="Center" width="100%">
										<header>
											<Text text="{i18n>mainTableInvoicingStart}"/>
										</header>
									</Column>
									<Column hAlign="Center" width="100%">
										<header>
											<Text text="{i18n>mainTableInvoicingFinal}"/>
										</header>
									</Column>
								</columns>

								<items>
									<ColumnListItem 
										id="tableDocsItems"
										type="Navigation"
										press="onItemTable"
									>
										<cells>										
											<Text text="{orders>Vbeln}"/>
											<Text text="{orders>CompanyName}"/>
											<Text text="{orders>CustomerReference}"/>
											<Text text="{orders>CustomerReferenceDate}"/>
											<Text text="{orders>SalesOrganization}"/>
											<Text text="{orders>OrderIssuer}"/>
											<Text text="{orders>SalesDocumentType}"/>
											<Text text="{orders>Ernam}"/>
											<Text text="{orders>Erdat}"/>
											<Text text="{orders>Erzet}"/>
						
											<!--Ordem de venda-->
											<Text text="{orders>Saleorder}"/>
											<Text text="{orders>SaleorderFinish}"/>
											<!--Crédito-->
											<Text text="{orders>Credit}"/>
											<Text text="{orders>CreditFinish}"/>
											<!--Remessa-->
											<Text text="{orders>Shipping}"/>
											<Text text="{orders>ShippingFinish}"/>
											<!--Transporte-->
											<Text text="{orders>Transport}"/>
											<Text text="{orders>TransportFinish}"/>
											<!--Faturamento-->
											<Text text="{orders>Invoicing}"/>
											<Text text="{orders>InvoicingFinish}"/>
										</cells>
									</ColumnListItem>
								</items>
							</Table>
						</content>
					</Panel>
				</content>
			</Page>

			<Page id="editLeadTimePage">
				<core:Fragment
					fragmentName="com.thera.ajinomoto.salesorders.view.fragments.EditLeadTime" 
					type="XML"
				/>

				<footer>
					<Toolbar>
						<ToolbarSpacer/>
						<Button
							icon="sap-icon://save"
							text="Atualizar"
							press="onPressUpdateLeadTime"
							visible="{filters>/buttonUpdateVisible}"
						/>
						<Button
							icon="sap-icon://save"
							text="Gravar"
							press="onPressSaveLeadTime"
							visible="{filters>/buttonSaveVisible}"
						/>
						<Button
							icon="sap-icon://cancel"
							text="Cancelar"
							press="onBackEditLeadTime"
						/>
					</Toolbar>
				</footer>
			</Page>
		</pages>
	</NavContainer>
</mvc:View>