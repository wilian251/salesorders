<mvc:View 
	xmlns:mvc="sap.ui.core.mvc" 
	xmlns="sap.m"
	xmlns:core="sap.ui.core"
	controllerName="com.thera.ajinomoto.salesorders.controller.Main" 
	displayBlock="true">
	<NavContainer id="navContainer">
		<pages>
			<Page id="contentPage">
				<Panel backgroundDesign="Solid">
					<content>
						<VBox class="contentDTOVCCSELE">
							<!--<VBox class="contentDatesSaleOrder">-->
								<VBox>
									<Label text="{i18n>mainFilterOrderDateIn}:" required="true"/>
									<DatePicker
										id="DateIn"
										valueFormat="dd/MM/yyyy"
										displayFormat="short"
										placeholder="dd/mm/aaaa"
										width="100%"
										value="{filters>/selectionDateIn}"
										valueState="{filters>/State/selectionDateIn/ValueState}"
										valueStateText="{filters>/State/selectionDateIn/ValueStateText}"
										enabled="{filters>/State/selectionDateIn/Enabled}"
										visible="{filters>/State/selectionDateIn/Visible}"
										change="onValidatedFieldsRequired"
										required="true"
									/>	
								</VBox>
								<!--class="contentDateUpUntil"-->
								<VBox>
									<Label text="{i18n>mainFilterOrderDateUpUntil}:" required="true"/>
								
									<DatePicker
										id="DateUpUntil"
										valueFormat="dd/MM/yyyy"
										displayFormat="short"
										placeholder="dd/mm/aaaa"
										width="100%"
										value="{filters>/selectionDateUpUntil}"
										valueState="{filters>/State/selectionDateUpUntil/ValueState}"
										valueStateText="{filters>/State/selectionDateUpUntil/ValueStateText}"
										enabled="{filters>/State/selectionDateUpUntil/Enabled}"
										visible="{filters>/State/selectionDateUpUntil/Visible}"
										change="onValidatedFieldsRequired"
										required="true"
									/>
								</VBox>
							<!--</VBox>-->

							<VBox>
								<Label text="{i18n>mainFilterTypeOV}:"/>
								<MultiComboBox
									id="typeOV"
									items="{
										path: '/HTvakSet'
									}"
									width="100%"
									selectedKeys="{filters>/selectionTypeOV}"
									valueState="{filters>/State/selectionTypeOV/ValueState}"
									valueStateText="{filters>/State/selectionTypeOV/ValueStateText}"
									enabled="{filters>/State/selectionTypeOV/Enabled}"
									visible="{filters>/State/selectionTypeOV/Visible}"
								>
									<core:Item key="{Auart}" text="{Auart} - {Bezei}"/>
								</MultiComboBox>	
							</VBox>

							<VBox>
								<Label text="{i18n>mainFilterClientCode}:"/>
								<MultiComboBox
									id="codClient"
									items="{
										path: '/ZshCodclientSet'
									}"
									width="100%"
									selectedKeys="{filters>/selectionClient}"
									valueState="{filters>/State/selectionClient/ValueState}"
									valueStateText="{filters>/State/selectionClient/ValueStateText}"
									enabled="{filters>/State/selectionClient/Enabled}"
									visible="{filters>/State/selectionClient/Visible}"
								>
									<core:Item key="{Kunnr}" text="{Kunnr} - {Name1}"/>
								</MultiComboBox>		
							</VBox>

							<VBox>
								<Label text="{i18n>mainFilterDistributionChannel}:"/>
								<MultiComboBox
									id="CNLDIST"
									items="{
										path: '/HTvkovSet'
									}"
									width="100%"
									selectedKeys="{filters>/selectionCanalDist}"
									valueState="{filters>/State/selectionCanalDist/ValueState}"
									valueStateText="{filters>/State/selectionCanalDist/ValueStateText}"
									enabled="{filters>/State/selectionCanalDist/Enabled}"
									visible="{filters>/State/selectionCanalDist/Visible}"
								>
									<core:Item key="{Vtweg}" text="{Vtweg} - {Vtext}"/>
								</MultiComboBox>		
							</VBox>
						
							<VBox>
								<Label text="{i18n>mainFilterSector}:"/>
								<MultiComboBox
									id="Setor"
									items="{
										path: '/HTvakSet'
									}"
									width="100%"
									selectedKeys="{filters>/selectionSetorAt}"
									valueState="{filters>/State/selectionSetorAt/ValueState}"
									valueStateText="{filters>/State/selectionSetorAt/ValueStateText}"
									enabled="{filters>/State/selectionSetorAt/Enabled}"
									visible="{filters>/State/selectionSetorAt/Visible}"
								>
									<core:Item key="{Auart}" text="{Auart} - {Bezei}"/>
								</MultiComboBox>		
							</VBox>

							<VBox>
								<Label text="{i18n>mainFilterCompany}:"/>
								<MultiComboBox
									id="company"
									items="{
										path: '/ZshCompanySet'
									}"
									width="100%"
									selectedKeys="{filters>/selectionCompany}"
									valueState="{filters>/State/selectionCompany/ValueState}"
									valueStateText="{filters>/State/selectionCompany/ValueStateText}"
									enabled="{filters>/State/selectionCompany/Enabled}"
									visible="{filters>/State/selectionCompany/Visible}"
								>
									<core:Item key="{Bukrs}" text="{Bukrs} - {Butxt}"/>
								</MultiComboBox>		
							</VBox>

							<VBox visible="false">
								<Label text="{i18n>mainFilterShippingLocation}:"/>
								<Input
									id="localExpedicao"
									value="{filters>/selectionLocalExp}"
									valueState="{filters>/State/selectionLocalExp/ValueState}"
									valueStateText="{filters>/State/selectionLocalExp/ValueStateText}"
									enabled="{filters>/State/selectionLocalExp/Enabled}"
									visible="{filters>/State/selectionLocalExp/Visible}"
								/>	
							</VBox>

							<VBox width="100%" alignItems="End">
								<Label />
								<Button 
									text="{i18n>mainButtonStart}"
									enabled="{filters>/buttonStartEnabled}"
									press="onPressStartReport"
									type="Emphasized"
									width="10rem"
								/>
							</VBox>
						</VBox>
					</content>
				</Panel>

				<content>
					<Panel id="averageSalesOrders" visible="true" backgroundDesign="Transparent">
						<headerToolbar>
							<Toolbar width="100%">
								<Title text="{orderTexts>/headerTextTitle}" titleStyle="H4" visible="{orderTexts>/State/headerTextTitle/Visible}"/>
							</Toolbar>
						</headerToolbar>

						<content>
							<VBox class="containerLeadTime">
								<!-- Ordem de venda -->
								<VBox id="saleOrder">
									<VBox class="mainLead">
										<Title class="mainLeadTitle" text="{i18n>leadTimeTitle}:" titleStyle="H4"/>
										<Text class="mainLeadText" text="{orders>Saleorderformattedlt}"/>
									</VBox>

									<VBox class="mainTitulo">
										<Title text="{i18n>mainCycleSaleOrder}" titleStyle="H4"/>
									</VBox>
											
									<VBox class="icon">
										<core:Icon
											id="saleOrderIcon"
											alt="{i18n>mainCycleSaleOrder}"
											backgroundColor=""
											color="{orders>SaleorderColor}"
											size="64px"
											src="sap-icon://write-new-document"
										/>
									</VBox>

									<VBox class="time">
										<ObjectStatus
											active="false"
											icon="sap-icon://pending"
											iconDensityAware="true"
											state="Success"
											text="{orders>/averageSalesOrder}"
											visible="{=${orders>/averageSalesOrder} === '' ? false : true}"
										/>

										<Text 
											text="{i18n>mainLeadTimeCycleNotStarted}" 
											visible="{=${orders>/averageSalesOrder} === '' ? true : false}"
										/>

										<ObjectStatus
											active="false"
											icon=""
											iconDensityAware="true"
											state="Success"
											text="{orders>totalTime/time}"
										/>
									</VBox>
								</VBox>

								<!-- Remessa -->
								<VBox id="shipping">
									<VBox class="mainLead">
										<Title class="mainLeadTitle" text="{i18n>leadTimeTitle}:" titleStyle="H4"/>
										<Text class="mainLeadText" text="{orders>Shippingformattedlt}"/>
									</VBox>


									<VBox class="mainTitulo">
										<Title text="{i18n>mainCycleShipping}" titleStyle="H4"/>
									</VBox>

									<VBox class="icon">
										<core:Icon
											id="shippingIcon"
											alt="{i18n>mainCycleShipping}"
											color="{orders>ShippingColor}"
											size="64px"
											src="sap-icon://course-program"
										/>
									</VBox>

									<VBox class="time">
										<ObjectStatus
											active="false"
											icon="sap-icon://pending"
											iconDensityAware="true"
											state="Success"
											text="{orders>/averageShipping}"
											visible="{=${orders>/averageShipping} === '' ? false : true}"
										/>

										<Text 
											text="{i18n>mainLeadTimeCycleNotStarted}" 
											visible="{=${orders>/averageShipping} === '' ? true : false}"
										/>
								
										<ObjectStatus
											active="false"
											icon=""
											iconDensityAware="true"
											state="Success"
											text="{orders>totalTime/time}"
										/>
									</VBox>
								</VBox>

								<!-- Crédito -->
								<VBox id="credit">
									<VBox class="mainLead">
										<Title class="mainLeadTitle" text="{i18n>leadTimeTitle}:" titleStyle="H4"/>
										<Text class="mainLeadText" text="{orders>Creditformattedlt}"/>
									</VBox>

									<VBox class="mainTitulo">
										<Title text="{i18n>mainCycleCredit}" titleStyle="H4"/>
									</VBox>	

									<VBox class="icon">
										<core:Icon
											id="creditIcon"
											alt="{i18n>mainCycleCredit}"
											color="{orders>CreditColor}"
											size="64px"
											src="sap-icon://credit-card"
										/>
									</VBox>
											
									<VBox class="time">
										<ObjectStatus
											active="false"
											icon="sap-icon://pending"
											iconDensityAware="true"
											state="Success"
											text="{orders>/averageCredit}"
											visible="{=${orders>/averageCredit} === '' ? false : true}"
										/>

										<Text 
											text="{i18n>mainLeadTimeCycleNotStarted}" 
											visible="{=${orders>/averageCredit} === '' ? true : false}"
										/> 

										<ObjectStatus
											active="false"
											icon=""
											iconDensityAware="true"
											state="Success"
											text="{orders>totalTime/time}"
										/>
									</VBox>
								</VBox>

								<!-- Transporte -->
								<VBox id="transport">
									<VBox class="mainLead">
										<Title class="mainLeadTitle" text="{i18n>leadTimeTitle}:" titleStyle="H4"/>
										<Text class="mainLeadText" text="{orders>Transportformattedlt}"/>
									</VBox>

									<VBox class="mainTitulo">	
										<Title text="{i18n>mainCycleTransport}" titleStyle="H4"/>
									</VBox>

									<VBox class="icon">
										<core:Icon
											id="transportIcon"
											alt="{i18n>mainCycleTransport}"
											color="{orders>TransportColor}"
											size="64px"
											src="sap-icon://shipping-status"
										/>
									</VBox>

									<VBox class="time">
										<ObjectStatus
											active="false"
											icon="sap-icon://pending"
											iconDensityAware="true"
											state="Success"
											text="{orders>/averageTransport}"
											visible="{=${orders>/averageTransport} === '' ? false : true}"
										/>

										<Text 
											text="{i18n>mainLeadTimeCycleNotStarted}" 
											visible="{=${orders>/averageTransport} === '' ? true : false}"
										/> 

										<ObjectStatus
											active="false"
											icon=""
											iconDensityAware="true"
											state="Success"
											text="{orders>totalTime/time}"
										/>
									</VBox>
								</VBox>

								<!-- Faturamento -->
								<VBox id="invoicing">
									<VBox class="mainLead">
										<Title class="mainLeadTitle" text="{i18n>leadTimeTitle}:" titleStyle="H4"/>
										<Text class="mainLeadText" text="{orders>Invoicingformattedlt}"/>
									</VBox>

									<VBox class="mainTitulo">
										<Title text="{i18n>mainCycleInvoicing}" titleStyle="H4"/>
									</VBox>

									<VBox class="icon">
										<core:Icon
											id="invoicingIcon"
											alt="{i18n>mainCycleInvoicing}"
											color="{orders>InvoicingColor}"
											size="64px"
											src="sap-icon://monitor-payments"
										/>
									</VBox>

									<VBox class="time">
										<ObjectStatus
											active="false"
											icon="sap-icon://pending"
											iconDensityAware="true"
											state="Success"
											text="{orders>/averageInvoicing}"
											visible="{=${orders>/averageInvoicing} === '' ? false : true}"
										/>

										<Text 
											text="{i18n>mainLeadTimeCycleNotStarted}" 
											visible="{=${orders>/averageInvoicing} === '' ? true : false}"
										/> 

										<ObjectStatus
											active="false"
											icon=""
											iconDensityAware="true"
											state="Success"
											text="{orders>totalTime/time}"
										/>
									</VBox>
								</VBox>

								<!-- Total do Tempo -->
								<VBox id="totalTime">
									<VBox class="mainLead">
										<Title class="mainLeadTitle" text="{i18n>leadTimeTitle}:" titleStyle="H4"/>
										<Text class="mainLeadText" text="{orders>Totalformattedlt}"/>
									</VBox>

									<VBox class="mainTitulo">
										<Title text="{i18n>mainCycleTotal}" titleStyle="H4"/>
									</VBox>

									<VBox class="icon">
										<core:Icon
											id="totalTimeIcon"
											alt="{i18n>mainCycleTotal}"
											color="{orders>TotalColor}"
											size="64px"
											src="sap-icon://date-time"
										/>
									</VBox>
											
									<VBox class="time">
										<ObjectStatus
											active="false"
											icon="sap-icon://pending"
											iconDensityAware="true"
											state="Success"
											text="{orders>/averageTotal}"
											visible="{=${orders>/averageTotal} === '' ? false : true}"
										/>

										<Text 
											text="{i18n>mainLeadTimeCycleNotStarted}" 
											visible="{=${orders>/averageTotal} === '' ? true : false}"
										/>

										<ObjectStatus
											active="false"
											icon=""
											iconDensityAware="true"
											state="Success"
											text="{orders>totalTime/time}"
										/>
									</VBox>
								</VBox>
							</VBox>
						</content>
					</Panel>

					<Panel id="panelSalesOrders">

						<content>
							<Table 
								id="tableSalesOrders" 
								updateFinished="onUpdateFinished"
								items="{
									path: 'orders>/items',
									length: '5000'
								}"
							>
								<headerToolbar>
									<Toolbar width="100%">
										<Title text="{orderTexts>/headerTitleTable}" level="H1" titleStyle="H3"/>
										<ToolbarSpacer />
										<SearchField
											id="searchField"
											search="onSearch"
											width="auto"
										/>
										<Button
											icon="sap-icon://excel-attachment"
											tooltip="{i18n>mainExportExcel}"
											press="onExportExcel"
										/>
									</Toolbar>
								</headerToolbar>

								<columns>							
									<Column hAlign="Center" width="100%">
										<header>
											<Text text="{i18n>mainTableNumberDocument}"/>
										</header>
									</Column>
									<Column hAlign="Center" width="100%">
										<header> 
											<Text  text="{i18n>mainTableCompanyName}"/>
										</header>
									</Column>
									<Column hAlign="Center" width="100%">
										<header>
											<Text  text="{i18n>mainTableCustomerReference}"/>
										</header>
									</Column>
									<Column hAlign="Center" width="100%">
										<header>
											<Text text="{i18n>mainTableCustomerReferenceDate}"/>
										</header>
									</Column>
									<Column hAlign="Center" width="100%">
										<header>
											<Text text="{i18n>mainTableSalesOrganization}"/>
										</header>
									</Column>
									<!--Ordem de Venda-->
									<Column hAlign="Center" width="100%">
										<header>
											<Text text="{i18n>mainCycleSaleOrder}"/>
										</header>
									</Column>
									<!--Remessa-->
									<Column hAlign="Center" width="100%">
										<header>
											<Text text="{i18n>mainCycleShipping}"/>
										</header>
									</Column>
									<!--Crédito-->
									<Column hAlign="Center" width="100%">
										<header>
											<Text text="{i18n>mainCycleCredit}"/>
										</header>
									</Column>
									<!--Transporte-->
									<Column hAlign="Center" width="100%">
										<header>
											<Text text="{i18n>mainCycleTransport}"/>
										</header>
									</Column>
									<!--Faturamento-->
									<Column hAlign="Center" width="100%">
										<header>
											<Text text="{i18n>mainCycleInvoicing}"/>
										</header>
									</Column>

									<Column hAlign="Center" width="100%">
										<header>
											<Text text="{i18n>mainLeadTimeAction}"/>
										</header>
									</Column>
								</columns>

								<items>
									<ColumnListItem 
										id="tableDocsItems"
										type="Navigation"
										press="onItemTable"
									>
										<cells>										
											<Text text="{orders>Vbeln}"/>
											<Text text="{orders>CompanyName}"/>
											<Text text="{orders>CustomerReference}"/>
											<Text text="{orders>CustomerReferenceDate}"/>
											<Text text="{orders>SalesOrganization}"/>
											<!--Ordem de venda-->
											<ObjectStatus 
												text="{orders>SaleorderFormatted}"
												icon="sap-icon://pending"
												state="{orders>SaleorderValueState}"
											/>
											<!--Remessa-->
											<ObjectStatus 
												text="{orders>ShippingFormatted}"
												icon="sap-icon://pending"
												state="{orders>ShippingValueState}"
											/>
											<!--Crédito-->
											<ObjectStatus 
												text="{orders>CreditFormatted}"
												icon="sap-icon://pending"
												state="{orders>CreditValueState}"
											/>
											<!--Transporte-->
											<ObjectStatus 
												text="{orders>TransportFormatted}"
												icon="sap-icon://pending"
												state="{orders>TransportValueState}"
											/>
											<!--Faturamento-->
											<ObjectStatus 
												text="{orders>InvoicingFormatted}"
												icon="sap-icon://pending"
												state="{orders>InvoicingValueState}"
											/>

											<Button
												icon="sap-icon://edit"
												press="onPressEditLead"
												type="Emphasized"
											>
												<dependents>
													<Text text="{orders>Vbeln}"/>
												</dependents>
											</Button>
										</cells>
									</ColumnListItem>
								</items>
							</Table>
						</content>
					</Panel>
				</content>
			</Page>

			<Page id="editLeadTimePage">
				<core:Fragment
					fragmentName="com.thera.ajinomoto.salesorders.view.fragments.EditLeadTime" 
					type="XML"
				/>

				<footer>
					<Toolbar>
						<ToolbarSpacer/>
						<Button
							icon="sap-icon://save"
							text="Gravar"
							press="onPressSaveLeadTime"
							enabled="{filters>/buttonStartEnabled}"
						/>
						<Button
							icon="sap-icon://cancel"
							text="Cancelar"
							press="onBackEditLeadTime"
						/>
					</Toolbar>
				</footer>
			</Page>
		</pages>
	</NavContainer>
</mvc:View>